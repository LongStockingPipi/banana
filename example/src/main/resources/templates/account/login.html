<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="utf-8"/>
<title>后台登录</title>
<meta name="author" content="DeathGhost" />
<link rel="stylesheet" type="text/css" th:href="@{/account/css/style.css}"/>
<style>
body{height:100%;background:#16a085;overflow:hidden;}
canvas{z-index:-1;position:absolute;}
</style>
<script type="text/javascript" th:src="@{/webjars/jquery/3.3.1-2/jquery.min.js}"></script>
<script type="text/javascript" th:src="@{/account/js/verificationNumbers.js}"></script>
<script type="text/javascript" th:src="@{/account/js/Particleground.js}"></script>
<script>
 /*<![CDATA[*/
 $(document).ready(function() {
  //粒子背景特效
  $('body').particleground({
   dotColor: '#5cbdaa',
   lineColor: '#5cbdaa'
  });
  //验证码
  createCode();
  //测试提交，对接程序删除即可
  $(".submit_btn").click(function(){
   location.href="javascrpt:;"/*tpa=http://***index.html*/;
  });
 });
 /*]]>*/
</script>
 <script>
  /*<![CDATA[*/
  function login() {
   let username = $("#username").val();
   let passwd = $("#passwd").val();
   let code = $("#validateCode_image").val();

   console.info("code: " + code)
   if(null == username || '' == username || username.length < 1) {
    alert("username can not ne null");
    return;
   }

   if(null == passwd || '' == passwd || passwd.length < 1) {
    alert("username can not ne null");
    return;
   }

   if(null == code || '' == code || code.length < 1) {
    alert("code can not ne null");
    return;
   }

   let url = '/auth/account';
   $.post(url, {username: username, password: passwd, validate_code: code}, function (data) {
    console.info(data);
    if(data.success == true) {
     window.location.href = "/page/index";
    } else {
     alert('login failed!');
    }
   })
  }
  /*]]>*/
 </script>
</head>
<body>
<dl class="admin_login">
 <dt>
  <strong>站点后台管理系统</strong>
  <em>Management System</em>
 </dt>
 <dd class="user_icon">
  <input type="text" placeholder="Username" class="login_txtbx" id="username"/>
 </dd>
 <dd class="pwd_icon">
  <input type="password" placeholder="Password" class="login_txtbx" id="passwd"/>
 </dd>
 <dd class="val_icon">
  <div class="checkcode">
    <input type="text" style="width:100%" id="validateCode_image" placeholder="Captcha Code" maxlength="6" class="login_txtbx"/>
  </div>
  <img class="J_codeimg" th:src="@{/captcha/image}"></img>
 </dd>
 <dd>
  <input value="Sign In" type="button" class="submit_btn" th:onclick="'javascript:login()'"/>
 </dd>
 <dd>
  <p>© 2015-2016 jq22 版权所有</p>
  <p>陕B2-8998988-1</p>
 </dd>
</dl>
</body>
</html>
